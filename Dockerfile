FROM python:3.10.8
RUN apt update && apt install -y ffmpeg
WORKDIR .
COPY main.py /main.py
COPY requirements.txt requirements.txt

RUN pip install -r requirements.txt

CMD python3 /main.py

ARG RADARR_API
ARG RADARR_HOST
ARG SONARR_API
ARG SONARR_HOST
ARG TMDB_API
ARG OUTPUT_DIRS
ARG SLEEP_TIME
ARG LENGTH_RANGE
ARG FILETYPE
ARG SKIP_INTROS
ARG THREAD_COUNT
ARG SUBS
ARG MOVIEPATH
ARG TVPATH

ENV RADARR_API=${RADARR_API} \
    RADARR_HOST=${RADARR_HOST} \
    SONARR_API=${SONARR_API} \
    SONARR_HOST=${SONARR_HOST} \
    TMDB_API=${TMDB_API} \
    OUTPUT_DIRS=${OUTPUT_DIRS} \
    SLEEP_TIME=${SLEEP_TIME} \
    LENGTH_RANGE=${LENGTH_RANGE} \
    FILETYPE=${FILETYPE} \
    SKIP_INTROS=${SKIP_INTROS} \
    THREAD_COUNT=${THREAD_COUNT} \
    SUBS=${SUBS} \
    MOVIEPATH=${MOVIEPATH} \
    TVPATH=${TVPATH}